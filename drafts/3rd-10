|Miércoles, 16 de Febrero de 2011|

	El osciloscopio digital es un dispositivo que se emplea para
	visualizar señales, es el sucesor de otros instrumentos como el
	oscilógrafo y el osciloscopio analógico. Algo importante a tener en
	cuenta cuando se estudia el osciloscopio digital es que se ha
	diseñado para conseguir un resultado similar al que se espera de un
	osciloscopio analógico. La diferencia entre uno y otro reside en la
	forma en la que se genera un barrido, el osciloscopio analógico
	dibuja la señal sobre la marcha mientras que el osciloscopio
	digital digitaliza y almacena la señal digital en memoria antes de
	representar.

	Un barrido es básicamente una imagen de la señal que abarca toda la
	pantalla del osciloscopio. Se llama así porque el haz de electrones
	que emite el tubo de rayos catódicos de un osciloscopio analógico
	barre literalmente el monitor para formar la imagen (que no es más
	que la imprenta dejada en el monitor por la acción del fósforo),
	pero en los osciloscopios digitales no hay barridos como tal, en
	realidad los osciloscopios digitales utilizan monitores LED en los
	que los distintos puntos de luz se apagan, o se encienden, o
	cambian de color, accionados por una señal de control. Cuando
	muchos barridos se suceden rápidamente se crea la sensación de que
	la representación de la señal se mueve, aunque no es así, y en los
	osciloscopios digitales no ocurre así estrictamente/ocurre
	estrictamente de forma distinta.

	Pero el resultado final es muy similar, a efectos prácticos es el
	mismo, pues el ojo humano no es capaz de percibir la diferencia y
	eso en la práctica significa que esa diferencia no existe. Pero si
	existe diferencia, y esa diferencia se nota en algunos aspectos
	relacionados con el funcionamiento del osciloscopio digital.
	Usualmente tanto los osciloscopios digitales como los analógicos
	hacen barridos disparados de la señal, esto es, empiezan a
	representar la señal al detectar un evento ---un flanco de subida o
	de bajada o similar--- en una señal de referencia que puede y
	acostumbra a ser la propia señal con la que se trabaja. De esa
	forma se consigue alinear todas las capturas o ciclos de la señal
	en fase unos con otros y con la señal. Si no se dispara resulta muy
	difícil observar la señal con el osciloscopio, especialmente si se
	trata de una señal aperiódica, porque los distintos ciclos
	representados se superponen y es difícil distinguir la señal
	correctamente. La diferencia entre los osciloscopios analógicos y
	digitales se manifiesta especialmente en que el osciloscopio
	digital empieza a representar la señal cuando detecta el evento y
	el usuario puede ver como evoluciona, sin embargo, el osciloscopio
	digital empieza a emph(muestrear) cuando observa el evento y no
	representa hasta que tiene muestras suficientes como para abarcar
	toda la dimensión temporal representada en el monitor, es ahí donde
	se hace evidente el retardo. Imagínese la siguiente situación de
	ejemplo, se trabaja con una señal que oscila lentamente y se
	configura la escala temporal para poder observar un periodo
	completo de la señal en pantalla, como la señal es lenta su periodo
	es largo, entonces llega el evento y en el osciloscopio analógico
	empieza a verse la señal apareciendo lentamente desde el margen
	izquierdo de la pantalla, sin embargo, en el osciloscopio digital
	no se ve nada y el retardo se hace visible y molesto. El retardo
	que se produce en situaciones como la expuesta / en las que trata
	de observarse evoluciones lentas de una señal dificulta el uso de
	los osciloscopios, pero especialmente el uso de los osciloscopios
	digitales. Para paliar los efectos del retardo, el osciloscopio
	digital aprovecha que puede representar los datos que tiene en
	memoria de otras formas diferentes y, cuando la escala temporal de
	la representación se configura por encima de un nivel de umbral,
	simula el comportamiento de los osciloscopios analógicos. En lugar
	de hacer barridos de la señal, actualiza la pantalla en ciclos
	cortos añadiendo a la representación fragmentos muy pequeños de
	señal, cortos en comparación con la dimensión temporal representada
	en el eje de abscisas. Los fragmentos tienen una duración igual al
	periodo con el que se refresca el monitor, que es un periodo de
	refresco fácilmente asumible por el osciloscopio dada la
	configuración de la escala temporal, pero que es muy difícil de
	seguir por parte del ojo humano. Cuando opera de este modo, el
	osciloscopio digital simula que la señal va desplazándose de
	derecha a izquierda, y el resultado es idéntico al que muestran los
	osciloscopios digitales.

	Hasta ahora he dicho muchas cosas pero algo importante es que el
	osciloscopio digital intenta conseguir un resultado similar al
	esperado de un osciloscopio digital. La diferencia entre uno y otro
	reside en la forma en la que se crea la imagen, el osciloscopio
	analógico dibuja la señal sobre la marcha, mientras que el
	osciloscopio digital digitaliza y almacena la señal en memoria
	antes de representar. Pero el resultado final es muy similar,
	podría decirse que el mismo, pues el ojo humano no es capaz de
	percibir la diferencia y eso a efectos prácticos es lo mismo que si
	esa diferencia no existiera. Pero si existe diferencia, y eso se
	nota en algunos aspectos del funcionamiento del osciloscopio
	digital. Habitualmente tanto los osciloscopios digitales como los
	analógicos hacen barridos disparados de la señal, esto es, empiezan
	a representar la señal cuando detectan un evento en una señal de
	referencia, señal que acostumbra a ser la señal con la que se
	trabaja. De esa forma se consigue que todas las capturas de la
	señal aparecen alineadas, en fase unas con otras y con la señal. Si
	no se hiciese esto resultaría muy difícil observar una señal,
	especialmente si ésta fuese aperiódica, con el osciloscopio. La
	diferencia está en que el osciloscopio analógico empieza a
	representar la señal cuando detecta el evento y hasta que llega al
	final de la pantalla, de izquierda a derecha, el osciloscopio
	digital empieza a MUESTREAR cuando recibe el evento y no representa
	hasta que tiene muestras suficientes como para abarcar toda la
	dimensión temporal del monitor, ahí se hace evidente el retardo. Si
	la señal es muy lenta, si la escala del eje de tiempos muestra que
	la dimensión temporal del eje representa un periodo de tiempo
	elevado, entonces en el osciloscopio analógico empieza a verse la
	señal apareciendo lentamente desde el margen izquierdo de la
	pantalla, sin embargo, en el osciloscopio digital no se ve nada y
	el retardo se hace molesto. Es molesto en ambos casos pero en el
	osciloscopio digital más aún, para paliar los efectos del retardo
	el osciloscopio aprovecha que puede representar los datos que tiene
	en memoria de otras formas diferentes y simula como si estuviese
	representando del mismo modo que hace el osciloscopio analógico. El
	eje de tiempos representa un periodo de tiempo muy elevado, si el
	osciloscopio actualiza la pantalla en ciclos cortos añadiendo a la
	representación fragmentos muy pequeños de señal, parece que la
	señal se está desplazando por el monitor como ocurre en el
	osciloscopio analógico.

	Me he saltado una cosa muy importante y es explicar que es un
	barrido, un barrido es básicamente una imagen de la señal que
	abarca toda la pantalla del osciloscopio. Se llama así porque el
	haz de electrones que emite el tubo de rayos catódicos de un
	osciloscopio analógico barre literalmente el monitor para formar
	la imagen (que no es más que la imprenta dejada en el monitor por
	la acción del fósforo), pero en los osciloscopios digitales no hay
	barridos como tal, en realidad los osciloscopios digitales utilizan
	monitores LED en los que los distintos puntos de luz se apagan o se
	encienden accionados por una señal de control.

	Esta forma de actuar debe llevarse a cabo también en el software de
	control pero implementar un disparo como tal es complicado. Por
	eso, se ha implementado una solución aproximada al barrido
	disparado. En lugar de empezar a muestrear a partir de un evento,
	de un pulso o similar en una señal auxiliar o en la propia señal,
	se muestrea la señal, y cuando ha transcurrido el suficiente tiempo
	como para disponer de bastantes muestras como para cubrir una
	ventana temporal y media (se llama ventana temporal al tiempo que
	representa el eje de tiempos en cada momento), entonces se procesan
	las muestras y además de eliminar la componente en continua se
	detectan los nulos de la señal y se alinea el más próximo a la
	muestra central del intervalo con el cero del plano cartesiano. De
	esa forma todas las capturas de la señal aparecen alineadas. El
	coste que se deriva de este algoritmo es una información que se
	descarta en cada ciclo.

	Un tren de flancos de subida con un periodo determinado por uno de
	los bytes digitales de salida de la tarjeta de adquisición.

	Existe una forma intuitiva de hacerlo por hardware, utilizando un
	circuito externo para generar una señal de reloj que debe activarse
	con los flancos de subida de una señal de referencia que puede
	construirse a partir de la señal de trabajo. La señal de referencia
	puede ser una señal cuadrada de frecuencia igual a la de la señal
	de trabajo o un submúltiplo de esta. La señal de reloj resultante.

	Para ello se ha de pasar una señal de reloj disparada por los
	flancos de subida de la señal de trabajo generada por un circuito
	externo al puerto J1 de la tarjeta de adquisición.  Este puerto
	puede utilizarse como fuente de reloj hardware externo.  En otras
	palabras, la tarjeta de adquisición puede muestrear la señal
	utilizando como base de tiempos la señal que entra por el puerto
	J1. Al puerto de disparo por hardware de la tarjeta de adquisición
	y configurar el disparo desde la aplicación de control utilizando
	las propiedades de los objetos dispositivo. Sin embargo esto
	requiere.

	Implementar un barrido disparado mediante software directamente en
	la aplicación de control es complicado teniendo en cuenta la
	configuración del sistema de medida. Podría hacerse por hardware,
	sería necesario generar una señal de reloj mediante un circuito
	externo. El circuito requiere de tres componentes, uno que genera
	un tren de pulsos rectangulares de frecuencia 100 kHz que se activa
	y se detiene por flanco de bajada o subida y que marca el muestreo,
	otro que genera el flanco que activa el tren de pulsos cuando la
	señal de trabajo efectúa una transición de tensión negativa a
	tensión positiva y, por último, otro que genera el flanco que
	detiene el tren de pulsos. Como señal que detiene el tren de
	pulsos es necesario un tren de flancos, pulsos estrechos, cuyo
	periodo depende de la escala temporal de la ventana donde se
	representa la señal. Dependiendo de la configuración de este
	parámetro puede cambiarse el valor de tensión que sale por uno de
	los puertos de salida analógica de la kpci, y en función de esta
	tensión generar una señal en la que el duty cycle varía y la
	duración del estado alto se mantiene. El flanco que detiene el
	muestreo puede monitorizarse para averiguar cuando debe la
	aplicación extraer las muestras del buffer de memoria asociado a la
	tarjeta y debe empezar a procesarlas. La señal de reloj debe
	pasarse a la tarjeta por el puerto J1, puerto que puede utilizarse
	como fuente de reloj hardware externo, y debe configurarse la
	tarjeta apropiadamente mediante las propiedades del objeto
	dispositivo correspondiente en matlab.

	Diseñar el circuito y realizar la configuración correspondiente
	requiere de un gran esfuerzo por lo que el problema de implementar
	barridos por disparo en el software de control se ha atajado
	empleando una solución aproximada. En lugar de empezar a muestrear
	a partir de un evento, de un pulso o de un flanco en una señal
	auxiliar o en la propia señal, se muestrea la señal, y cuando ha
	transcurrido el suficiente tiempo como para disponer de bastantes
	muestras como para cubrir dos ventanas temporales (en este
	documento se llama ventana temporal al tiempo que representa el eje
	de tiempos en cada momento), entonces se procesan las muestras y
	además de eliminar la componente en continua se detectan los nulos
	de la señal. Después se alinea el más próximo de los nulos a la
	muestra central del intervalo con el cero del plano cartesiano. De
	esa forma todas las capturas de la señal aparecen alineadas. Las
	vref muestran como funciona este algoritmo.

	El coste que se deriva de utilizar un algoritmo como este para
	obtener barridos disparados de la señal es la información que se
	descarta en cada ciclo, al desplazar la señal todo lo que queda
	fuera de la ventana no se representa, con lo que parte de la
	información capturada es descartada.
